var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function o(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(function(e){function n(t){var n=e.call(this,t)||this;return Object.defineProperty(n,"message",{enumerable:!1,value:t}),Object.defineProperty(n,"name",{enumerable:!1,value:n.constructor.name}),"captureStackTrace"in Error?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{enumerable:!1,value:Error(t).stack,writable:!0,configurable:!0}),n}return t(n,e),n}(Error)),c=function(e){function n(t,n,r,o){return e.call(this,"".concat(t,": expected ").concat(n," to be ").concat(r,", but got ").concat(o,"."))||this}return t(n,e),n.assert=function(e,t,r,o,i){if(!e)throw new n(t,r,o,i);return e},n}(i),a=function(e){function n(t,n,r){var o=t.toString(),i=n.map((function(e){return e.name.toString()}));i.push(o);var c=i.join(" -> "),a="Could not resolve '".concat(o,"'.");return r&&(a+=" ".concat(r)),a+="\n\n",a+="Resolution path: ".concat(c),e.call(this,a)||this}return t(n,e),n}(i),s=function(e){function n(t,n){var r=t.toString(),o="Could not register '".concat(r,"'.");return n&&(o+=" ".concat(n)),e.call(this,o)||this}return t(n,e),n}(i),u={PROXY:"PROXY",CLASSIC:"CLASSIC"},l={SINGLETON:"SINGLETON",TRANSIENT:"TRANSIENT",SCOPED:"SCOPED"};function f(e){var t=e.length,n=0,r="EOF",o="",i=0,c=0,a=0;return{next:function(e){return void 0===e&&(e=0),i=e,s(),o?{value:o,type:r}:{type:r}},done:function(){return"EOF"===r}};function s(){for(o="",r="EOF";;){if(n>=t)return r="EOF";var s=e.charAt(n);if(d(s))n++;else switch(s){case"(":return n++,c++,r=s;case")":return n++,a++,r=s;case"*":case",":return n++,r=s;case"=":return n++,0==(1&i)&&l((function(e){var t=c===a+1;return!((","!==e||!t)&&("("===e?(c++,1):")"!==e||(a++,!t)))})),r=s;case"/":n++;var f=e.charAt(n);"/"===f&&(l((function(e){return"\n"===e}),!0),n++),"*"===f&&(l((function(t){var r=e.charAt(n+1);return"*"===t&&"/"===r}),!0),n++);continue;default:if(g(s))return u(),r;n++}}}function u(){for(var t,i=e.charAt(n),c=++n;t=e.charAt(n),v.test(t);)n++;return o=""+i+e.substring(c,n),"ident"!==(r="function"===o||"class"===o?o:"ident")&&(o=""),o}function l(t,r){for(void 0===r&&(r=!1);n<e.length;){var o=e.charAt(n);if(t(o))return;if(!r){if(d(o)){n++;continue}if(p(o)){f();continue}}n++}}function f(){var t=e.charAt(n);for(n++;n<e.length;){var r=e.charAt(n),o=e.charAt(n-1);if(r===t&&"\\"!==o)return void n++;"`"===t&&"$"===e.charAt(n+1)&&"{"===e.charAt(n+2)&&(n+=2,l((function(e){return"}"===e}))),n++}}}function d(e){switch(e){case"\r":case"\n":case" ":return!0}return!1}function p(e){switch(e){case"'":case'"':case"`":return!0}return!1}var h=/^[_$a-zA-Z\xA0-\uFFFF]$/,v=/^[._$a-zA-Z0-9\xA0-\uFFFF]$/;function g(e){return h.test(e)}function y(e){if("function"!=typeof e)return!1;var t=f(e.toString()),n=t.next();if("class"===n.type)return!0;var r=t.next();return!("function"!==n.type||!r.value||r.value[0]!==r.value[0].toUpperCase())}function w(e){return"function"==typeof e}var b=Symbol("Awilix Resolver Config");function m(e,t){if(!w(e))throw new c("asFunction","fn","function",e);t=j({lifetime:l.TRANSIENT},t,e[b]);var r=k(e);return E(O(n({resolve:r},t)))}function S(e,t){if(!w(e))throw new c("asClass","Type","class",e);t=j({lifetime:l.TRANSIENT},t,e[b]);var r=k((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Reflect.construct(e,t)}),e);return E(O(n(n({},t),{resolve:r})))}function O(e){function t(e){return O(n(n({},this),{lifetime:e}))}function r(e){return O(n(n({},this),{injectionMode:e}))}return A(e,{setLifetime:t,inject:function(e){return O(n(n({},this),{injector:e}))},transient:x(t,l.TRANSIENT),scoped:x(t,l.SCOPED),singleton:x(t,l.SINGLETON),setInjectionMode:r,proxy:x(r,u.PROXY),classic:x(r,u.CLASSIC)})}function E(e){return A(e,{disposer:function(e){return E(n(n({},this),{dispose:e}))}})}function x(e,t){return function(){return e.call(this,t)}}function j(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object.assign.apply(Object,o([{},e],t,!1))}function A(e,t){return n(n({},e),t)}function T(e,t){var n,i=t(e),c=(n=o(o([],Reflect.ownKeys(e.cradle),!0),Reflect.ownKeys(i),!0),Array.from(new Set(n)));return new Proxy({},{get:function(t,n){return n===Symbol.iterator?function(){var t,n,o,c,a,s,u,l;return r(this,(function(r){switch(r.label){case 0:for(o in t=e.cradle,n=[],t)n.push(o);c=0,r.label=1;case 1:return c<n.length?(o=n[c])in t?[4,o]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:return c++,[3,1];case 4:for(u in s=[],a=i)s.push(u);l=0,r.label=5;case 5:return l<s.length?(u=s[l])in a?[4,u]:[3,7]:[3,8];case 6:r.sent(),r.label=7;case 7:return l++,[3,5];case 8:return[2]}}))}:n in i?i[n]:e.resolve(n)},ownKeys:function(){return c},getOwnPropertyDescriptor:function(e,t){if(c.indexOf(t)>-1)return{enumerable:!0,configurable:!0}}})}function k(e,t){t||(t=e);var n=P(t);return function(t){if((this.injectionMode||t.options.injectionMode||u.PROXY)!==u.CLASSIC){var r=this.injector?T(t,this.injector):t.cradle;return e(r)}if(n.length>0){var o=this.injector?function(e,t){return function(n,r){return n in t?t[n]:e.resolve(n,r)}}(t,this.injector(t)):t.resolve,i=n.map((function(e){return o(e.name,{allowUnregistered:e.optional})}));return e.apply(void 0,i)}return e()}}function P(e){var t=function(e){var t=f(e),n=t.next,r=t.done,o=[],i=null;for(d();!r();)switch(i.type){case"class":if(u(),!l())return null;d();break;case"function":"ident"!==(c=d()).type&&"*"!==c.type||d();break;case"(":s();break;case")":return o;case"ident":var c,a={name:i.value,optional:!1};if("async"===i.value&&(c=d())&&"="!==c.type)break;return o.push(a),o;default:throw p()}return o;function s(){for(var e={name:"",optional:!1};!r();)switch(d(),i.type){case"ident":e.name=i.value;break;case"=":e.optional=!0;break;case",":o.push(e),e={name:"",optional:!1};break;case")":return void(e.name&&o.push(e));default:throw p()}}function u(){for(;!l()&&!r();)d(1)}function l(){return"ident"===i.type&&"constructor"===i.value}function d(e){return void 0===e&&(e=0),i=n(e)}function p(){return new SyntaxError("Parsing parameter list, did not expect ".concat(i.type," token").concat(i.value?" (".concat(i.value,")"):""))}}(e.toString());if(!t){var n=Object.getPrototypeOf(e);return"function"==typeof n&&n!==Function.prototype?P(n):[]}return t}var C=Symbol("familyTree"),I=Symbol("rollUpRegistrations"),N="AwilixContainerCradle";function R(e){return void 0===e&&(e={}),$(e)}function $(e,t,i){var f;e=n({injectionMode:u.PROXY,strict:!1},e);var d=null!=i?i:[],p={},h=new Proxy({},{get:function(e,t){return A(t)},set:function(e,t){throw new Error('Attempted setting property "'.concat(t,'" on container cradle - this is not allowed.'))},ownKeys:function(){return Array.from(h)},getOwnPropertyDescriptor:function(e,t){var n=O();if(Object.getOwnPropertyDescriptor(n,t))return{enumerable:!0,configurable:!0}}}),v=((f={options:e,cradle:h,inspect:function(){return"[AwilixContainer (".concat(t?"scoped, ":"","registrations: ").concat(Object.keys(v.registrations).length,")]")},cache:new Map,loadModules:function(){throw new Error("loadModules is not supported in the browser.")},createScope:function(){return $(e,v,d)},register:function(n,r){for(var i=function(e,t){var n,r=e;return"string"==typeof r||"symbol"==typeof r?((n={})[e]=t,n):r}(n,r),c=0,a=o(o([],Object.keys(i),!0),Object.getOwnPropertySymbols(i),!0);c<a.length;c++){var u=a[c],f=i[u];if(e.strict&&f.lifetime===l.SINGLETON&&t)throw new s(u,"Cannot register a singleton on a scoped container.");p[u]=f}return v},build:function(e,t){if(e&&e.resolve)return e.resolve(v);var n="build",r="targetOrResolver";return c.assert(e,n,r,"a registration, function or class",e),c.assert("function"==typeof e,n,r,"a function or class",e),(y(e)?S(e,t):m(e,t)).resolve(v)},resolve:A,hasRegistration:function(e){return!!j(e)},dispose:function(){var e=Array.from(v.cache.entries());return v.cache.clear(),Promise.all(e.map((function(e){var t=e[1],n=t.resolver,r=t.value,o=n;return o.dispose?Promise.resolve().then((function(){return o.dispose(r)})):Promise.resolve()}))).then((function(){}))},getRegistration:j})[I]=O,Object.defineProperty(f,"registrations",{get:function(){return O()},enumerable:!1,configurable:!0}),f),g=t?[v].concat(t[C]):[v];v[C]=g;var w,b=(w=g)[w.length-1];return v;function O(){return n(n({},t&&t[I]()),p)}function E(){var e,t,n,o,i;return r(this,(function(r){switch(r.label){case 0:for(o in e=O(),n=[],t=e)n.push(o);i=0,r.label=1;case 1:return i<n.length?(o=n[i])in t?[4,o]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}function x(){return Object.prototype.toString.call(h)}function j(e){return p[e]||(t?t.getRegistration(e):null)}function A(t,n){n=n||{};try{var r=j(t);if(d.some((function(e){return e.name===t})))throw new a(t,d,"Cyclic dependencies detected.");if("toJSON"===t)return x;if("constructor"===t)return R;if(!r){switch(t){case"inspect":case"toString":return x;case Symbol.toStringTag:return N;case"then":return;case Symbol.iterator:return E}if(n.allowUnregistered)return;throw new a(t,d)}var o=r.lifetime||l.TRANSIENT;if(e.strict&&!r.isLeakSafe){var i=d.findIndex((function(e){var t,n,r=e.lifetime;return n=o,(t=r)===l.SINGLETON&&n!==l.SINGLETON||t===l.SCOPED&&n===l.TRANSIENT}));if(i>-1)throw new a(t,d,"Dependency '".concat(t.toString(),"' has a shorter lifetime than its ancestor: '").concat(d[i].name.toString(),"'"))}d.push({name:t,lifetime:o});var c=void 0,s=void 0;switch(o){case l.TRANSIENT:s=r.resolve(v);break;case l.SINGLETON:(c=b.cache.get(t))?s=c.value:(s=r.resolve(e.strict?b:v),b.cache.set(t,{resolver:r,value:s}));break;case l.SCOPED:if(void 0!==(c=v.cache.get(t))){s=c.value;break}s=r.resolve(v),v.cache.set(t,{resolver:r,value:s});break;default:throw new a(t,d,'Unknown lifetime "'.concat(r.lifetime,'"'))}return d.pop(),s}catch(e){throw d.length=0,e}}}var L=Object.freeze({__proto__:null,AwilixError:i,AwilixRegistrationError:s,AwilixResolutionError:a,AwilixTypeError:c,InjectionMode:u,Lifetime:l,RESOLVER:b,aliasTo:function(e){return{resolve:function(t){return t.resolve(e)},isLeakSafe:!0}},asClass:S,asFunction:m,asValue:function(e){return{resolve:function(){return e},isLeakSafe:!0}},createContainer:R,default:null});function D(e){return e&&"function"==typeof e}function F(e){return!!e&&D(e.resolve)&&D(e.setLifetime)&&D(e.scoped)&&D(e.transient)&&D(e.singleton)}function _(e){return F(e)||function(e){return!!e&&"boolean"==typeof e.isLeakSafe}(e)}let M,U={resolvedDependencies:{},dependencies:{awilix:{get:()=>U.importModule("awilix",(()=>"https://esm.run/awilix@10.0.1/lib/awilix.browser.js"))}},importModule:async function(e,t=((e,t)=>`https://esm.run/${e}`)){let n,r="undefined"!=typeof process&&process?.versions?.node;try{new URL(e),n=!0}catch(e){n=!1}if(n&&r)throw new Error("You cannot import url modules via node.");if(r)return await import(e);return await import(n?e:t(e,U))}},G=0,V=0;function Y(e,t,n={}){if(!G)throw new Error("Install before using simplified-awilix");const{existingContainer:r,handleUnregistered:o,config:i}=[e,t,n].reduce(((e,t)=>(D(t)?e.handleUnregistered=t:function(e){return e&&D(e.register)&&D(e.createScope)&&e.cradle}(t)?e.existingContainer=t:e.config=t,e)),{});return X({container:r,handleUnregistered:o,config:i})}function X(e={}){let{AwilixResolutionError:t,config:n,createContainer:r,asFunction:o,asValue:i,aliasTo:c,container:a,handleUnregistered:s=(()=>{})}={...M,...e};a||(a=r?.(n));let u=a.cradle;const l=a._createScope||=a.createScope,f=a._register||=a.register;function d(e,t="transient",n){"string"==typeof e&&(e={[e]:t},t=n||"transient");for(const[n,r]of Object.entries(e)){let e=r;if("object"==typeof r&&!_(r)&&D(r?.resolver)||F(r?.resolver)){const{resolver:i,disposer:c,inject:a,injector:s=a,type:u,lifetime:l=u||t}=r;e=o(i),D(c)&&(e=e.disposer(c)),D(s)&&(e=e.inject(c)),f(n,e[l]())}else _(e)?e.resolve&&!e[t]?f(n,e):f(n,e[t]()):D(e)?f(n,o(e)[t]()):f(n,i(e))}return a}return Object.defineProperty(a,"cradle",{get:()=>new Proxy({},{get(e,n){try{return u[n]}catch(e){if(e instanceof t)return s(n,a.cradle);throw e}}})}),function(e,...t){const n=t.length;if(n<1||null==e)return e;for(let r=0;r<n;r++){const n=t[r];for(const t in n)e[t]=n[t]}return e}(a,{register:d,registerTransient:function(...e){return d(...e,"transient")},registerScoped:function(...e){return d(...e,"scoped")},registerSingleton:function(...e){return d(...e,"singleton")},createScope:function(e=s){return X({AwilixResolutionError:t,createContainer:r,asFunction:o,asValue:i,aliasTo:c,container:l(),handleUnregistered:e})}})}await async function(e={}){const t={...U,...e};if(G++)return Y;if(V++)return new Promise((e=>{const t=setInterval((()=>{V||(e(Y),clearInterval(t))}),100)}));const{dependencies:n}=t;return M=await n.awilix.get(),Y}({resolvedDependencies:{awilix:L}});let K=(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};class q extends Error{constructor(e){super(e)}}class z extends q{constructor(e){super(`Dependency "${e}" is not installed.`),this.dependency=e}}class Z extends q{constructor(e,t){super(`Dependency "${e}" could not be installed because ${t.message}`),this.dependency=e,this.error=t}}class B extends z{constructor(e,t){super(`A non-optional dependency "${e}" could not be resolved.`),this.dependency=e,this.error=t}}class J extends q{constructor(e,t){super(`"${e}" dependency could not be added because ${t}`)}}class H extends q{constructor(e,t){super(`"${e}" could not be validated ${t?"because "+t?.message||t:""}`)}}class Q extends Error{constructor(e,t){super(`Installation error of "${e}" because `+(t?.message||t))}}class W extends Error{constructor(e,t){const n=t.map((e=>e?.message||e)).join("\n\r - ");console.error(`\n        ${e}\n        Multiple Errors:\n        ${n}\n        `),super(e)}}class ee extends Error{constructor(e,t,n){super(`Stage Merger Error initiator stage: ${e} cannot receive merge of target stage: ${e} because: ${n}`)}}function te(e,t){const n=Array.isArray(t)?t:t.split(".");return!!e&&(n.length>1?te(e[n[0]],n.slice(1).join(".")):hasOwnProperty.call(e,t))}function ne(e,t,n=void 0){const r=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!=e?e[t]:e),e),o=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===o||o===e?n:o}function re(e,t,n){let r=t;"string"==typeof t&&(r=t.split(/[,[\]]+?/));let o=e;for(let t=0;t<r.length;t++){const i=r[t];t===r.length-1&&(o[i]=n),o[i]||(o[i]={}),o=e[i]}return e}function oe(e){for(let t in e)e.hasOwnProperty(t)&&delete e[t]}async function ie(e,t={}){try{return await import(function(e,t={}){const{mimeType:n="text/javascript",charset:r="utf-8"}=t;let o="";return null!==r&&(o+=`charset=${r};`),`data:${n};${o}base64,${btoa(e)}`}(e,t))}catch(e){if("ERR_INVALID_URL"===e.code)throw new TypeError("Could not import code. If the code has any 'require' or 'import' statements, the import will not work without a bundler.");throw e}}const ce=Y().registerScoped({id:()=>K(),installed:!1,name:"",container:()=>{},optional:!1,code:void 0,uri:void 0,module:void 0,install:function(e){return async(t=!0)=>{const{validator:n,container:r,name:o,module:i,code:c,uri:a,optional:s,exports:u}=e;try{let e;if(i)e=i;else if(c){const t=await ie(c),n=Object.keys(t);e=u&&u.length?Object.entries(t).reduce(((e,[t,n])=>(u.includes(t)&&(e[t]=n),e))):1===n.length&&n.includes("default")?t.default:t}else a&&(e=await import(a));if(null!=e&&(e=await Promise.resolve(e)),t&&!await Promise.resolve(n).catch((e=>{throw new H(o,e)})))throw new H(o);if(e)return r.registerScoped({module:e,installed:!0}).cradle}catch(e){if(!s)throw new Z(o,e)}if(!s)throw new B(o)}},exports:[],validator:async e=>!!e,dispose:({container:e})=>()=>e.dispose()});const ae=K(),se={},ue=Y().registerSingleton({rootId:ae}).registerScoped({depth:0,merge:function(e){const{dependencies:t,depth:n,rootId:r,id:o}=e;return({dependencies:i,depth:c,rootId:a,id:s})=>{if(c<n&&r===a)throw new ee(o,s,"cannot merge a scoped stage into its parent stage.");for(const[e,n]of Object.entries(i))te(t,e)||re(t,e,n);return e}},id:()=>ae,container:()=>ue,install:function({dependencies:e,requireDependencyValidation:t}){return async(n=t)=>{let r={},o={},i=0;for await(const t of Object.values(e)){const{name:e,optional:c,install:a,installed:s}=t.cradle;if(s)re(r,e,t);else try{re(r,e,await a(n))}catch(n){c||i++,re(o,e,{dependency:t,error:n})}}if(i){if(i>1)throw new W(`Installation Failures (${i})`,o.map((({dependency:e,error:t})=>new Q(e.cradle.name,t))));{const{dependency:e,error:t}=Object.values(o)[0];throw new Q(e.cradle.name,t)}}return{resolved:r,rejected:o,failed:!!i,failedCount:i}}},forks:{resolver:()=>[],disposer:e=>e.length=0},pack:null,packConfiguration:{},dependencies:{resolver:()=>se,disposer:oe},requireDependencyValidation:!0,installDependency:function({dependencies:e}){return(t,n)=>ne(e,t).install(n)},addDependency:function({dependencies:e,container:t,forks:n}){return(r={})=>{"string"==typeof r&&(r={name:r});const{name:o,reinstall:i=!1,validator:c,...a}=r;if(!o)throw new J("Name not defined","name of dependency was not defined");let s;if(te(e,o)&&!i){const t=ne(e,o),{installed:n}=t.cradle;if(n)throw new J(o,"dependency already installed.");s=t}else s=ce.createScope();s.registerScoped({id:K(),container:s,stage:t,name:o,...a}).registerTransient({validator:c}),re(e,o,s);for(const e of n)e.dependencies[o]||=s;return s.cradle}},dispose:({container:e})=>()=>e.dispose(),fork:function({container:e,depth:t,dependencies:n,forks:r}){return()=>{const o=e.createScope(),i={...n},c=K(),a=r.push(o.cradle)-1;return o.registerScoped({id:c,container:()=>o,depth:t+1,dispose:({container:e})=>()=>e.dispose(),dependencies:{resolver:()=>i,disposer:e=>{oe(e),r.splice(a,1)}}}),o.cradle}}});const le=ue.cradle,{install:fe}=le;export{fe as install,le as stage};
